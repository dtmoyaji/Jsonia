{
  "extends": "component",
  "icon": "📂",
  "name": "アコーディオン",
  "tag": "div",
  "type": "container",
  "category": "interactive",
  "description": "開閉可能なアコーディオンコンポーネント",
  "template": {
    "tag": "div",
    "attributes": { 
      "class": "accordion",
      "style": "border: 1px solid #ddd; border-radius: 4px; overflow: hidden;"
    },
    "children": [
      {
        "tag": "div",
        "attributes": {
          "class": "accordion-item"
        },
        "children": [
          {
            "tag": "div",
            "attributes": {
              "class": "accordion-header",
              "data-accordion-header": "true",
              "data-accordion-id": "section-1",
              "style": "padding: 12px 16px; background: #f8f9fa; cursor: pointer; font-weight: bold; border-bottom: 1px solid #ddd; display: flex; align-items: center; gap: 8px;"
            },
            "children": [
              {
                "tag": "span",
                "attributes": {
                  "class": "accordion-icon",
                  "style": "font-size: 10px; transition: transform 0.3s ease; transform: rotate(-90deg);"
                },
                "text": "▼"
              },
              {
                "tag": "span",
                "text": "セクション 1"
              }
            ]
          },
          {
            "tag": "div",
            "attributes": {
              "class": "accordion-content collapsed",
              "data-accordion-content": "section-1",
              "data-slot": "children"
            },
            "children": []
          }
        ]
      }
    ]
  },
  "defaultAttributes": {
    "class": "accordion"
  },
  "behavior": {
    "methods": {
      "addChild": {
        "description": "アコーディオンのコンテンツに子要素を追加（data-accordion-content属性で検索）",
        "params": ["accordionId", "childElement"],
        "steps": [
          { "type": "dom.select", "selector": "[data-accordion-content=\"{{accordionId}}\"]", "output": "content" },
          { "type": "if", "condition": "{{content}}", "then": [
            { "type": "dom.appendChild", "parent": "{{content}}", "child": "{{childElement}}" },
            { "type": "dom.removeInnerDropZone", "parent": "{{content}}" }
          ]}
        ]
      },
      "removeChild": {
        "description": "アコーディオンのコンテンツから子要素を削除（data-accordion-content属性で検索）",
        "params": ["accordionId", "childElement"],
        "steps": [
          { "type": "dom.select", "selector": "[data-accordion-content=\"{{accordionId}}\"]", "output": "content" },
          { "type": "if", "condition": "{{content}}", "then": [
            { "type": "dom.removeChild", "parent": "{{content}}", "child": "{{childElement}}" }
          ]}
        ]
      },
      "clearChildren": {
        "description": "アコーディオンのコンテンツをクリア（data-accordion-content属性で検索）",
        "params": ["accordionId"],
        "steps": [
          { "type": "dom.select", "selector": "[data-accordion-content=\"{{accordionId}}\"]", "output": "content" },
          { "type": "if", "condition": "{{content}}", "then": [
            { "type": "dom.setInnerHTML", "target": "{{content}}", "value": "" }
          ]}
        ]
      },
      "setChildren": {
        "description": "アコーディオンのコンテンツを一括設定（data-accordion-content属性で検索）",
        "params": ["accordionId", "children"],
        "steps": [
          { "type": "dom.select", "selector": "[data-accordion-content=\"{{accordionId}}\"]", "output": "content" },
          { "type": "if", "condition": "{{content}}", "then": [
            { "type": "dom.setInnerHTML", "target": "{{content}}", "value": "" },
            { "type": "array.forEach", "array": "{{children}}", "item": "child", "do": [
              { "type": "dom.appendChild", "parent": "{{content}}", "child": "{{child}}" }
            ]}
          ]}
        ]
      }
    },
    "events": [
      {
        "target": "[data-accordion-header]",
        "type": "click",
        "action": "toggleAccordion"
      }
    ]
  }
}
